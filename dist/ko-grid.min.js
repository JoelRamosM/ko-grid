!function e(t,i,n){function a(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return a(i?i:e)},d,d.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,t,i){e("./extensions/doubleClickBindHandler.js"),e("./extensions/formatterBindHandler.js"),e("./components/register-all.js")},{"./components/register-all.js":11,"./extensions/doubleClickBindHandler.js":12,"./extensions/formatterBindHandler.js":13}],2:[function(e,t,i){ko.components.register("crud-bar",{viewModel:e("./ViewModel.js"),template:e("./Template.html")})},{"./Template.html":3,"./ViewModel.js":4}],3:[function(e,t,i){t.exports='\ufeff<div classs="btn-group">\n    <!--ko if: newActionVisible-->\n    <button class="btn btn-primary" data-bind="click: $data.new, enable: newActionEnabled">\n        <span class="fa fa-plus" aria-hidden="true"></span> Novo\n    </button>\n    <!--/ko-->\n    <!--ko if: editActionVisible-->\n    <button class="btn btn-primary" data-bind="click: $data.edit, enable: editActionEnable">\n        <span class="fa fa-edit" aria-hidden="true"></span> Editar\n    </button>\n    <!--/ko-->\n    <!--ko if: deleteActionVisible-->\n    <button class="btn btn-danger" type="button" data-bind="click: $data.delete, enable: deleteActionEnable">\n        <span class="fa fa-remove" aria-hidden="true"></span> Excluir\n        <span class="badge" data-bind="visible:selectedCountBadge, text: selectedCountBadge"></span>\n    </button>\n    <!--/ko-->\n    <!--ko if: customActions().length-->\n    <!--ko foreach: customActions-->\n    <button class="btn" type="button" data-bind="click: $data.action, css:$data.btnClass">\n        <span data-bind="css:$data.iconClass" aria-hidden="true"></span>\n        <span data-bind="text: text"></span>\n    </button>\n    <!--/ko-->\n    <!--/ko-->\n</div>'},{}],4:[function(e,t,i){function n(e){this.onNew=new ko.subscribable,this.onEdit=new ko.subscribable,this.onDelete=new ko.subscribable,this.selectedCountBadge=ko.observable(0),this.newActionVisible=ko.observable(e.withNewAction||void 0==e.withNewAction||null==e.withNewAction),this.newActionEnabled=ko.observable(e.newActionEnable||void 0==e.newActionEnable||null==e.newActionEnable),this.editActionVisible=ko.observable(e.withEditAction||void 0==e.withEditAction||null==e.withEditAction),this.editActionEnable=ko.observable(e.editActionEnable||void 0==e.editActionEnable||null==e.editActionEnable),this.deleteActionVisible=ko.observable(e.withDeleteAction||void 0==e.withDeleteAction||null==e.withDeleteAction),this.deleteActionEnable=ko.observable(e.deleteActionEnable||void 0==e.deleteActionEnable||null==e.deleteActionEnable),this.customActions=ko.observableArray(e.customActions),this.onNew.subscribe(function(){e.onNew&&e.onNew()},this),this.onEdit.subscribe(function(){e.onEdit&&e.onEdit()},this),this.onDelete.subscribe(function(){e.onDelete&&e.onDelete()},this),e.crudBarAPI&&ko.isObservable(e.crudBarAPI)?e.crudBarAPI(a(this)):e.crudBarAPI=a(this)}var a=e("../../models/api/ApiCrudBarBuilder");n.prototype.setSelectedCount=function(e){this.selectedCountBadge(e)},n.prototype.new=function(){this.onNew.notifySubscribers()},n.prototype.disableNew=function(){this.newActionEnabled(!1)},n.prototype.enableNew=function(){this.newActionEnabled(!0)},n.prototype.delete=function(){this.onDelete.notifySubscribers()},n.prototype.disableDelete=function(){this.deleteActionEnable(!1)},n.prototype.enableDelete=function(){this.deleteActionEnable(!0)},n.prototype.edit=function(){this.onEdit.notifySubscribers()},n.prototype.disableEdit=function(){this.editActionEnable(!1)},n.prototype.enableEdit=function(){this.editActionEnable(!0)},t.exports=n},{"../../models/api/ApiCrudBarBuilder":15}],5:[function(e,t,i){ko.components.register("grid",{viewModel:e("./ViewModel.js"),template:e("./Template.html")})},{"./Template.html":6,"./ViewModel.js":7}],6:[function(e,t,i){t.exports='<!--ko if: dataSource().dataSet().length == 0 -->\n<div data-bind="html: emptyTemplate"></div>\n<!--/ko-->\n<div class="panel  panel-default" data-bind="visible: dataSource().dataSet().length > 0 ">\n    <table role="grid" class="table  table-hover table-bordered ko-grid_table" data-bind="if: dataSource().dataSet().length > 0">\n        <thead class="ko-grid_thead">\n            <tr class="ko-grid_head-row">\n                <!--ko if: isMultiSelect-->\n                <td class="col-sm-1 text-center ko-grid_th-check-all"><input type="checkbox" data-bind="checked: checkAll" /></td>\n                <!--/ko-->\n                <!--ko foreach: columns-->\n                <th class="ko-grid_th" data-bind="text:title"></th>\n                <!--/ko-->\n            </tr>\n        </thead>\n        <tbody class="ko-grid_tbody" data-bind="foreach: dataSource().dataSet">\n            <tr role="row" class="odd ko-grid_row" data-bind="doubleClick: $parent.rowDoubleClickAction.bind($parent)" title="De dois cliques na linha para editar item.">\n                <!--ko if: $parent.isMultiSelect-->\n                <td class="col-sm-1 text-center ko-grid_check-collumn"><input type="checkbox" data-bind="value:$data[\'id\'] || $data[\'Id\'] || $data[$parent.identityProp()], checked:$parent.selectedRows"\n                    /></td>\n                <!--/ko-->\n                <!--ko foreach: $parent.columns-->\n                <td class="ko-grid_collumn" data-bind="text: $parents[1]._getDataValue($parent,$data.prop), formatter: $data.format"></td>\n                <!--/ko-->\n            </tr>\n        </tbody>\n        <tfoot>\n            <tr data-bind="if: hasAggregates" class="active ko-grid_row-footer_aggregate">\n                <!--ko if: isMultiSelect-->\n                <td class="col-sm-1 text-center"></td>\n                <!--/ko-->\n                <!--ko foreach: columns-->\n                <td class="ko-grid_collumn" data-bind="text: $parent._getAggregate($data), formatter: $data.format"></td>\n                <!--/ko-->\n            </tr>\n        </tfoot>\n    </table>\n    <div class="row ko-grid_row-footer" data-bind="if: dataSource().dataSet().length > 0" style="bottom: 0;position: relative;width: 100%;margin-top: 7px;margin-bottom: 5px;">\n        <div class="col-md-7" style="border:none;position: relative;left: 0;">\n            <page-control class="ko-grid_page-control" params="{totalPages: totalPages, currentPage: currentPage, onGoTo: goToPage.bind($data), onNext: next.bind($data), onPrev:prev.bind($data)}"></page-control>\n        </div>\n        <div class="col-md-5 text-right ko-grid_description" style="border:none;position: relative;right: 0; top:7px">\n            <span data-bind="text: dataSourceDescription"></span>\n        </div>\n    </div>\n</div>'},{}],7:[function(e,t,i){function n(e){return e.url?new o(e):new r(e)}function a(e){e=e.config||{};var t=this;this.name=ko.observable(e.name),this.identityProp=ko.observable(e.identityProp),this.onRefresh=new ko.subscribable,this.onRefreshCallback=function(e){this.onRefresh.notifySubscribers(e)},this.isMultiSelect=ko.observable(e.isMultiSelect),this.hasAggregates=ko.observable(e.hasAggregates),this.rowDoubleClickAction=e.rowDoubleClickAction||e.defaultAction||function(){},this.columns=ko.observableArray(e.columns),this.emptyTemplate=ko.observable(e.emptyTemplate||l),this.dataSource=ko.observable(n({url:e.url,dataSet:e.data,defaultAction:e.defaulAction,onRefresh:this.onRefreshCallback.bind(this)})),this.selectedRows=ko.observableArray([]),this.totalPages=ko.computed(function(){return this.dataSource().gridRequest().totalPages()},this),this.currentPage=ko.computed(function(){return this.dataSource().gridRequest().currentPage()},this),this.dataSourceDescription=ko.computed(function(){var e=(this.dataSource().gridRequest().currentPage()-1)*this.dataSource().gridRequest().pageLength()+1,t=e+this.dataSource().gridRequest().data().length-1;return"Mostrando de "+e+" para "+t+". Total: "+this.dataSource().gridRequest().totalData()+" itens"},this),this.checkAll=ko.computed({read:function(){return this.selectedRows().length===this.dataSource().dataSet().length},write:function(e){e?(t.selectedRows.removeAll(),this.dataSource().dataSet().forEach(function(e){t.selectedRows.push(e[t.identityProp()]||e.id||e.Id)})):this.selectedRows.removeAll()},owner:this}),e.gridAPI&&ko.isObservable(e.gridAPI)?e.gridAPI(s(this)):e.gridAPI=s(this),this.dataSource().refresh()}var o=e("../../models/gridRemoteDataSource"),r=e("../../models/gridLocalDataSource"),s=e("../../models/api/ApiGridBuilder"),l="<div class='bs-callout bs-callout-info'><h4>Sem Dados</h4></div>";a.prototype._getDataValue=function(e,t){var i=t.split("."),n=e[i[0]];return i.length>1?this._getDataValue(n,i.slice(1).join(".")):n},a.prototype._getAggregate=function(e){if(e.aggregate)return this.dataSource().getAggregate({column:e.prop,aggregate:e.aggregate})},a.prototype.defaultAction=function(e){this.defaulActionCallback&&this.defaulActionCallback(e[this.identityProp()]||e.id||e.Id)},a.prototype.refresh=function(){this.dataSource().refresh()},a.prototype.filter=function(e){this.dataSource().refresh(e)},a.prototype.goToPage=function(e){this.dataSource().goto(e)},a.prototype.next=function(){this.dataSource().next()},a.prototype.prev=function(){this.dataSource().prev()},t.exports=a},{"../../models/api/ApiGridBuilder":16,"../../models/gridLocalDataSource":18,"../../models/gridRemoteDataSource":19}],8:[function(e,t,i){ko.components.register("page-control",{viewModel:e("./ViewModel.js"),template:e("./Template.html")})},{"./Template.html":9,"./ViewModel.js":10}],9:[function(e,t,i){t.exports='<nav data-bind="visible: totalPages()>1">\n    <ul class="pagination pagination-sm" style="margin:0;">\n        <li data-bind="css:{\'disabled\':!prevPageEnable()}" style="cursor:pointer;">\n            <a class="glyphicon glyphicon-step-backward ko-grid__pagination_first-icon" data-bind="click:first"></a>\n        </li>\n        <li data-bind="css:{\'disabled\':!prevPageEnable()}" style="cursor:pointer;">\n            <a aria-label="Previous" class="glyphicon glyphicon-backward ko-grid__pagination_prev-icon" data-bind="click:prev"></a>\n        </li>\n        <!--<li data-bind="css:{\'disabled\':!prevPageEnable()},visible: ellipisisPrev"><span>...</span></li>-->\n        <!--ko foreach: pages-->\n        <li data-bind="css:{\'active\': $data.current}" style="cursor:pointer;">\n            <a style="top:1px;" data-bind="text:$data.value, click: $parent.goTo.bind($parent,$data.value)"></a>\n        </li>\n        <!--/ko-->\n        <li data-bind="css:{\'disabled\':!nextPageEnable()},visible: ellipisisNext"><span style="top:1px;">...</span></li>\n        <li data-bind="css:{\'disabled\':!nextPageEnable()}" style="cursor:pointer;">\n            <a class="glyphicon glyphicon-forward ko-grid__pagination_next-icon" data-bind="click:next"></a>\n        </li>\n        <li data-bind="css:{\'disabled\':!nextPageEnable()}" style="cursor:pointer;">\n            <a class="glyphicon glyphicon-step-forward ko-grid__pagination_last-icon" data-bind="click:last"></a>\n        </li>\n    </ul>\n</nav>'},{}],10:[function(e,t,i){function n(e){this.totalPages=ko.isObservable(e.totalPages)?e.totalPages:ko.observable(e.totalPages),this.currentPage=ko.isObservable(e.currentPage)?e.currentPage:ko.observable(e.currentPage),this.controlSize=ko.observable(e.controlSize||5),this.pages=ko.computed(function(){var e=[];if(this.totalPages()<=this.controlSize())for(var t=0;t<this.totalPages();t++)e.push({value:t+1,current:t+1===this.currentPage()});else if(this.currentPage()>this.controlSize())for(var t=this.currentPage()-this.controlSize()+1;t<=this.currentPage();t++)e.push({value:t,current:t===this.currentPage()});else for(var t=0;t<this.controlSize();t++)e.push({value:t+1,current:t+1===this.currentPage()});return e},this),this.prevPageEnable=ko.computed(function(){return this.currentPage()>1},this),this.nextPageEnable=ko.computed(function(){return this.currentPage()<this.totalPages()},this),this.ellipisisNext=ko.computed(function(){return this.totalPages()>this.controlSize()&&this.totalPages()-this.currentPage()>0},this),this.ellipisisPrev=ko.computed(function(){return this.currentPage()-this.controlSize()>0},this),this.onNextCallback=e.onNext,this.onPrevCallback=e.onPrev,this.onGoToCallback=e.onGoTo,this.onChangeCallback=e.onChange,this.onChange=new ko.subscribable,this.onGoTo=new ko.subscribable,this.onNext=new ko.subscribable,this.onPrev=new ko.subscribable,this.onChange.subscribe(function(e){this.onChangeCallback&&this.onChangeCallback(e)},this),this.onNext.subscribe(function(e){this.onChange.notifySubscribers(e),this.onNextCallback&&this.onNextCallback(e)},this),this.onPrev.subscribe(function(e){this.onChange.notifySubscribers(e),this.onPrevCallback&&this.onPrevCallback(e)},this),this.onGoTo.subscribe(function(e){this.onChange.notifySubscribers(e),this.onGoToCallback&&this.onGoToCallback(e)},this)}n.prototype.next=function(e){this.nextPageEnable()&&this.onNext.notifySubscribers(e)},n.prototype.last=function(){this.nextPageEnable()&&this.goTo(this.pages().length)},n.prototype.prev=function(e){this.prevPageEnable()&&this.onPrev.notifySubscribers(e)},n.prototype.first=function(){this.prevPageEnable()&&this.goTo(1)},n.prototype.goTo=function(e){this.onGoTo.notifySubscribers(e)},t.exports=n},{}],11:[function(e,t,i){e("./page-control/Register"),e("./grid/Register"),e("./crud-bar/Register")},{"./crud-bar/Register":2,"./grid/Register":5,"./page-control/Register":8}],12:[function(e,t,i){ko.bindingHandlers.doubleClick={init:function(e,t,i,n,a){var o=t.bind(a)();ko.utils.registerEventHandler(e,"dblclick",function(e){o(n,e)})}}},{}],13:[function(e,t,i){ko.bindingHandlers.formatter={init:function(){},update:function(e,t,i,n,a){var o,r=ko.unwrap(t()),s=ko.unwrap(i.get("text"))||"";if("function"==typeof r)return void $(e).text(r(s));if("string"==typeof r){if("cpfcnpj"===r)return 11===s.length?o=s.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4"):14===s.length&&(o=s.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5")),void $(e).text(o);if("date"===r){var l=moment(s).format("DD/MM/YYYY");return void $(e).text(l)}if("dateTime"===r){var l=moment(s).format("DD/MM/YYYY HH:mm");return void $(e).text(l)}}}}},{}],14:[function(e,t,i){function n(e,t,i,n,a,o){var r=$.ajax({method:e,url:t,data:i}).done(n).fail(a).always(o);return r}t.exports={get:function(e,t,i,a,o){return n("GET",e,t,i,a,o)},_delete:function(e,t,i,a,o){return n("DELETE",e,t,i,a,o)}}},{}],15:[function(e,t,i){function n(e){return{disableNewAction:e.disableNew.bind(e),enableNewAction:e.enableNew.bind(e),disableDeleteAction:e.disableDelete.bind(e),enableDeleteAction:e.enableDelete.bind(e),disableEditAction:e.disableEdit.bind(e),enableEditAction:e.enableEdit.bind(e),setSelectedBadge:e.setSelectedCount.bind(e)}}t.exports=n},{}],16:[function(e,t,i){function n(e){return{applyFilter:e.filter.bind(e),refresh:e.refresh.bind(e),onRefresh:e.onRefresh,selectedRows:e.selectedRows,dataSource:e.dataSource}}t.exports=n},{}],17:[function(e,t,i){function n(e){e=e||{};this.gridRequest=ko.observable(new a),this.dataSet=ko.computed(function(){return this.gridRequest().data()},this),this.selected=ko.observableArray(),this.onRefresh=new ko.subscribable,this.onRefresh.subscribe(function(){e.onRefresh(this.gridRequest().data())},this),this.next=function(){this.gridRequest().currentPage(this.gridRequest().currentPage()+1),this.refresh()},this.prev=function(){this.gridRequest().currentPage(this.gridRequest().currentPage()-1),this.refresh()},this.goto=function(e){this.gridRequest().currentPage(e),this.refresh()}}var a=e("./gridRequest");t.exports=n},{"./gridRequest":20}],18:[function(e,t,i){function n(e){e=e||{},o.bind(this,e).call();this.filterableFields=ko.isObservable(e.filterableFields)?e.filterableFields:ko.observableArray(e.filterableFields||[]),this.localData=ko.isObservable(e.dataSet)?e.dataSet:ko.observableArray(e.dataSet||[]),this.localData.subscribe(function(e){this.refresh()},this)}function a(e){return(e().currentPage()-1)*e().pageLength()}var o=e("./gridDataSource.base");n.prototype.refresh=function(e){var t=a(this.gridRequest),i=this.localData().slice(t,this.gridRequest().currentPage()*this.gridRequest().pageLength());this.gridRequest().totalPages(Math.floor((this.localData().length+this.gridRequest().pageLength()-1)/this.gridRequest().pageLength())),this.gridRequest().totalData(this.localData().length),this.gridRequest().data(i),this.onRefresh.notifySubscribers()},n.prototype.getAggregate=function(e){return"sum"!=e.aggregate?0:this.gridRequest().data().map(function(t){return Number.parseFloat(ko.isObservable(t[e.column])?t[e.column]():t[e.column])||0}).reduce(function(e,t){return t+e})},t.exports=n},{"./gridDataSource.base":17}],19:[function(e,t,i){function n(e){e=e||{},a.bind(this,e).call();this.url=ko.isObservable(e.url)?e.url:ko.observable(e.url||""),this.urlNotInformed=ko.computed(function(){return!this.url()},this)}var a=e("./gridDataSource.base"),o=e("./gridRequest"),r=e("./ajax-request");n.prototype.getAggregate=function(e){if("sum"!=e.aggregate)return 0;var t=this.gridRequest().aggregates().filter(function(t){return t.column==e.column});return t.length&&aggregate[0].value||0},n.prototype.refresh=function(e){var t=this;e=e||{};var i=ko.toJS(this.gridRequest());delete i.data;for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);var a=$.param(i);r.get(this.url(),a,function(e){t.gridRequest(new o(e)),t.onRefresh.notifySubscribers()})},t.exports=n},{"./ajax-request":14,"./gridDataSource.base":17,"./gridRequest":20}],20:[function(e,t,i){function n(e){e=e||{},this.pageLength=ko.observable(e.pageLength||e.PageLength||10),this.query=ko.observable(e.query||e.Query||""),this.currentPage=ko.observable(e.currentPage||e.CurrentPage||1),this.totalPages=ko.observable(e.totalPages||e.TotalPages||1),this.totalData=ko.observable(e.totalData||e.TotalData||0),this.data=ko.observableArray(e.data||e.Data||[]),this.aggregates=ko.observableArray(e.aggregates||[])}t.exports=n},{}]},{},[1]);